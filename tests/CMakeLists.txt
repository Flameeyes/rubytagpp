ENABLE_TESTING()
SET(RUNTEST_COMMAND ${RUBY_EXECUTABLE} -I${CMAKE_CURRENT_BINARY_DIR}/..)

ADD_TEST(loading ${RUNTEST_COMMAND} test-loading.rb)
ADD_TEST(decompressing ${RUNTEST_COMMAND} test-decompressing.rb ${CMAKE_CURRENT_SOURCE_DIR}/emptywave.wav.bz2)
ADD_TEST(mp3basic ${RUNTEST_COMMAND} test-mp3basic.rb ${CMAKE_CURRENT_SOURCE_DIR}/emptywave.wav.bz2)
ADD_TEST(oggbasic ${RUNTEST_COMMAND} test-oggbasic.rb ${CMAKE_CURRENT_SOURCE_DIR}/emptywave.wav.bz2)
ADD_TEST(mpcbasic ${RUNTEST_COMMAND} test-mpcbasic.rb ${CMAKE_CURRENT_SOURCE_DIR}/emptywave.wav.bz2)
ADD_TEST(mp3writesave ${RUNTEST_COMMAND} test-mp3writesave.rb ${CMAKE_CURRENT_SOURCE_DIR}/emptywave.wav.bz2)
ADD_TEST(oggfields ${RUNTEST_COMMAND} test-oggfields.rb ${CMAKE_CURRENT_SOURCE_DIR}/emptywave.wav.bz2)
ADD_TEST(fileref ${RUNTEST_COMMAND} test-fileref.rb ${CMAKE_CURRENT_SOURCE_DIR}/emptywave.wav.bz2)
